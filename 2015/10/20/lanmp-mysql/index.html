<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Lanmp服务器环境搭建 – Mysql · xbhub</title><meta name="description" content="
下载Mysql5.5.4 http://www.mysql.com/

安装mysql（5.5版本）
tar zxvf mysql-5.5.40.tar.gzcd mysql-5.5.4&lt;a href=&quot;#yum_install_ncurses-devel_cmake_bison-devel_libaio-devel_gcc-c++_bison_"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/blog/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">博客</a></li><li class="nav-list-item"><a href="http://weibo.com/jorycn" target="_blank" class="nav-list-link">微博</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="https://github.com/jorycn" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Lanmp服务器环境搭建 – Mysql</h1><div class="post-meta"><div class="post-time">2015年10月20日</div></div><div class="post-content"><ol>
<li><p>下载Mysql5.5.4 <a href="http://www.mysql.com/" target="_blank" rel="external">http://www.mysql.com/</a></p>
</li>
<li><p>安装mysql（5.5版本）</p>
<h1 id="tar_zxvf_mysql-5-5-40-tar-gz"><a href="#tar_zxvf_mysql-5-5-40-tar-gz" class="headerlink" title="tar zxvf mysql-5.5.40.tar.gz"></a>tar zxvf mysql-5.5.40.tar.gz</h1><h1 id="cd_mysql-5-5-4"><a href="#cd_mysql-5-5-4" class="headerlink" title="cd mysql-5.5.4"></a>cd mysql-5.5.4</h1><h1 id="yum_install_ncurses-devel_cmake_bison-devel_libaio-devel_gcc-c++_bison_-y"><a href="#yum_install_ncurses-devel_cmake_bison-devel_libaio-devel_gcc-c++_bison_-y" class="headerlink" title="yum install ncurses-devel cmake bison-devel libaio-devel gcc-c++ bison -y"></a>yum install ncurses-devel cmake bison-devel libaio-devel gcc-c++ bison -y</h1><p>`<br>mysql5.5 版本之后，预编译的 configure命令改为了 cmake, 需要手动安装一下 cmake命令</p>
<pre>`# cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/data -DSYSCONFDIR=/etc -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci
# make &amp;&amp; make install
`</pre></li>
<li>配置数据库<h5 id="u901A_u7528_u914D_u7F6E"><a href="#u901A_u7528_u914D_u7F6E" class="headerlink" title="通用配置"></a>通用配置</h5><pre>`# groupadd mysql<br>————创建mysql组<h1 id="useradd_-g_mysql_mysql"><a href="#useradd_-g_mysql_mysql" class="headerlink" title="useradd -g mysql mysql"></a>useradd -g mysql mysql</h1>————在mysql组中创建mysql用户<h1 id="cp_/usr/local/mysql/support-files/my-medium-cnf_/etc/mysql/my-cnf"><a href="#cp_/usr/local/mysql/support-files/my-medium-cnf_/etc/mysql/my-cnf" class="headerlink" title="cp /usr/local/mysql/support-files/my-medium.cnf /etc/mysql/my.cnf"></a>cp /usr/local/mysql/support-files/my-medium.cnf /etc/mysql/my.cnf</h1>————默认没有mysql的配置文件，将源码包中的配置文件拷贝到etc下的配置文件中。<h1 id="/usr/local/mysql/scripts/mysql_install_db__u2013user_3Dmysql__u2013basedir_3D/usr/local/mysql__u2013datadir_3D/usr/local/mysql/data"><a href="#/usr/local/mysql/scripts/mysql_install_db__u2013user_3Dmysql__u2013basedir_3D/usr/local/mysql__u2013datadir_3D/usr/local/mysql/data" class="headerlink" title="/usr/local/mysql/scripts/mysql_install_db –user=mysql –basedir=/usr/local/mysql –datadir=/usr/local/mysql/data"></a>/usr/local/mysql/scripts/mysql_install_db –user=mysql –basedir=/usr/local/mysql –datadir=/usr/local/mysql/data</h1>————初始化数据库，指定用户为mysql，家目录为/usr/local/mysql，数据库目录为/usr/local/mysql/data<h1 id="chown_-R_root_/usr/local/mysql/"><a href="#chown_-R_root_/usr/local/mysql/" class="headerlink" title="chown -R root /usr/local/mysql/"></a>chown -R root /usr/local/mysql/</h1>————改变目录的所有者<h1 id="chown_-R_mysql_/usr/local/mysql/data"><a href="#chown_-R_mysql_/usr/local/mysql/data" class="headerlink" title="chown -R mysql /usr/local/mysql/data"></a>chown -R mysql /usr/local/mysql/data</h1>————改变目录的所有者<h1 id="chgrp_-R_mysql_/usr/local/mysql/"><a href="#chgrp_-R_mysql_/usr/local/mysql/" class="headerlink" title="chgrp -R mysql /usr/local/mysql/"></a>chgrp -R mysql /usr/local/mysql/</h1>————改变目录的所属组<br>//将/usr/local/mysql/bin下的命令放到环境变量中<br>vi /etc/profile<br>PATH=$PATH:/usr/local/mysql/bin<br>source profile<br>//检查环境变量ok<h1 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h1>//添加快捷管理<br>cp support-files/mysql.server /etc/init.d/mysql<br>chkconfig mysql on<br>`</pre><h5 id="u7279_u6B8A_u914D_u7F6E"><a href="#u7279_u6B8A_u914D_u7F6E" class="headerlink" title="特殊配置"></a>特殊配置</h5></li>
</ol>
<ul>
<li>修改监听地址为本地，提高安全性。<blockquote>
<p>此项配置之后，无法远程登陆管理mysql，最佳方案为配置phpmyadmin进行管理，但安全性大大提升！也可不配置此项，通过用户严格权限管理实现。</p>
<pre>`//查看所有端口，mysql默认是0.0.0.0：3306
# netstat -ntulp
//修改为127.0.0.1
# vi /etc/mysql/my.cnf
添加一列
[mysqld]
port            = 3306
socket          = /tmp/mysql.socK
bind-address=127.0.0.1
# service mysql start
# netstat -ntulp
`</pre></blockquote>
</li>
<li>修改 mysql的root密码<br><pre><code>use mysql
update user set Password=PASSWORD(&#39;新密码&#39;) where User=&#39;root&#39; and Host=&#39;localhost&#39;;
flush privileges;</code></pre><h5 id="u6743_u9650_u7BA1_u7406"><a href="#u6743_u9650_u7BA1_u7406" class="headerlink" title="权限管理"></a>权限管理</h5><blockquote>
<p>数据库用户权限管理，对于授权ip地址 ‘%’ 表示所有端口；</p>
</blockquote>
</li>
<li>赋权限<pre>`grant usage on *.* to username@localhost identified by 'password';
grant all privileges on newdb.* to username@localhost ;
`</pre></li>
<li>用户管理<br><pre>`//查看授权用户<br>SELECT DISTINCT CONCAT(‘User: ‘’’,user,’’’@’’’,host,’’’;’) AS query FROM mysql.user;<br>//修改密码<br>update mysql.user set password=password(‘新密码’) where User=”test” and Host=”localhost”;<br>flush privileges;<br>//删除授权用户<br>drop user 用户名@’%’;<br>drop user 用户名@ localhost;</pre></li>
</ul>
</div></article></div></section><footer><div class="paginator"><a href="/blog/2015/10/21/lanmp-memcached/" class="prev">上一篇</a><a href="/blog/2015/10/20/lanmp-php/" class="next">下一篇</a></div></footer><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>